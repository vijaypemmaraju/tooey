<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>table - tooey</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: ui-monospace, monospace; background: #0a0a0f; color: #888; padding: 48px; }
    a { color: #0af; text-decoration: none; }
    h1 { font-size: 12px; font-weight: 400; color: #fff; margin-bottom: 4px; }
    .tag { font-size: 11px; margin-bottom: 32px; }
    pre { font-size: 10px; color: #4f8; background: #111; padding: 10px; overflow-x: auto; margin-bottom: 8px; }
    .demo { background: #111; padding: 12px; }
    .demo input { font-family: inherit; font-size: 11px; background: #0a0a0f; color: #fff; border: 1px solid #333; padding: 4px 8px; }
    table { width: 100%; border-collapse: collapse; font-size: 11px; }
    th, td { padding: 6px 8px; text-align: left; border-bottom: 1px solid #222; }
    th { color: #0af; cursor: pointer; }
    th:hover { color: #fff; }
    td { color: #ccc; }
    .back { font-size: 11px; margin-bottom: 24px; display: block; }
    .cols { display: flex; gap: 32px; flex-wrap: wrap; }
    .col { flex: 1; min-width: 280px; }
    .col h2 { font-size: 11px; font-weight: 400; color: #666; margin-bottom: 8px; }
  </style>
</head>
<body>
  <a href="index.html" class="back">&larr; back</a>
  <h1>data table</h1>
  <p class="tag">-80% vs react</p>

  <div class="cols">
    <div class="col">
      <h2>tooey ~285 chars</h2>
      <pre>{s:{q:"",sort:"name",asc:true,data:[
  {name:"alice",age:28,role:"engineer"},
  {name:"bob",age:34,role:"designer"},
  {name:"carol",age:25,role:"manager"}
]},r:[V,{g:12},[
  [I,"",{ph:"search...",v:{$:"q"},x:["q","!"]}],
  [D,[/* dynamic table */]]
]]}</pre>
      <div class="demo" id="app"></div>
    </div>
    <div class="col">
      <h2>react ~1412 chars</h2>
      <pre style="color:#f87;">function DataTable() {
  const [q, setQ] = useState('');
  const [sort, setSort] = useState('name');
  const [asc, setAsc] = useState(true);
  const [data] = useState([...]);
  const filtered = data
    .filter(r => Object.values(r).some(v =>
      String(v).toLowerCase().includes(q.toLowerCase())))
    .sort((a,b) => {...});
  const toggleSort = (col) => {...};
  return (
    &lt;div style={{display:'flex',flexDirection:'column',gap:12}}&gt;
      &lt;input placeholder="search..." .../&gt;
      &lt;table&gt;...&lt;/table&gt;
    &lt;/div&gt;
  );
}</pre>
    </div>
  </div>

  <script src="../dist/tooey.js"></script>
  <script>
    const { signal } = tooey;

    const container = document.getElementById('app');
    const q = signal('');
    const sortCol = signal('name');
    const asc = signal(true);
    const data = signal([
      {name:"alice", age:28, role:"engineer"},
      {name:"bob", age:34, role:"designer"},
      {name:"carol", age:25, role:"manager"},
      {name:"david", age:31, role:"engineer"},
      {name:"eve", age:29, role:"designer"}
    ]);

    function render() {
      container.innerHTML = '';
      const main = document.createElement('div');
      main.style.cssText = 'display:flex;flex-direction:column;gap:12px';

      const input = document.createElement('input');
      input.placeholder = 'search...';
      input.value = q();
      input.addEventListener('input', e => q.set(e.target.value));
      main.appendChild(input);

      const table = document.createElement('table');
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');
      ['name', 'age', 'role'].forEach(col => {
        const th = document.createElement('th');
        const arrow = sortCol() === col ? (asc() ? ' ↑' : ' ↓') : '';
        th.textContent = col + arrow;
        th.addEventListener('click', () => {
          if (sortCol() === col) asc.set(!asc());
          else { sortCol.set(col); asc.set(true); }
        });
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);

      const tbody = document.createElement('tbody');
      const filtered = data()
        .filter(row => Object.values(row).some(v =>
          String(v).toLowerCase().includes(q().toLowerCase())))
        .sort((a, b) => {
          const av = a[sortCol()], bv = b[sortCol()];
          const cmp = av < bv ? -1 : av > bv ? 1 : 0;
          return asc() ? cmp : -cmp;
        });

      filtered.forEach(row => {
        const tr = document.createElement('tr');
        ['name', 'age', 'role'].forEach(col => {
          const td = document.createElement('td');
          td.textContent = row[col];
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
      main.appendChild(table);
      container.appendChild(main);
    }

    q.sub(render);
    sortCol.sub(render);
    asc.sub(render);
    render();
  </script>
</body>
</html>
