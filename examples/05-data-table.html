<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>data table - tooey</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: ui-monospace, monospace; background: #0a0a0f; color: #888; padding: 24px; }
    @media (min-width: 600px) { body { padding: 48px; } }
    a { color: #0af; text-decoration: none; }
    h1 { font-size: 14px; font-weight: 400; color: #fff; margin-bottom: 4px; }
    .tag { font-size: 12px; margin-bottom: 32px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 24px; margin-bottom: 32px; }
    @media (min-width: 900px) { .grid { grid-template-columns: 1fr 1fr; gap: 32px; } }
    .col h2 { font-size: 11px; font-weight: 400; color: #666; margin-bottom: 8px; }
    pre { font-size: 10px; background: #111; padding: 12px; overflow-x: auto; margin-bottom: 16px; border-radius: 4px; }
    .tooey pre { color: #4f8; }
    .react pre { color: #f97; }
    .demo { background: #111; padding: 16px; border-radius: 4px; }
    .demo input { font-family: inherit; font-size: 13px; background: #0a0a0f; color: #fff; border: 1px solid #333; padding: 8px 12px; width: 100%; border-radius: 4px; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; font-size: 12px; }
    th, td { padding: 8px 12px; text-align: left; border-bottom: 1px solid #222; }
    th { color: #0af; cursor: pointer; user-select: none; }
    th:hover { color: #fff; }
    td { color: #ccc; }
    .back { font-size: 12px; margin-bottom: 24px; display: block; }
  </style>
</head>
<body>
  <a href="index.html" class="back">&larr; back</a>
  <h1>data table</h1>
  <p class="tag">-80% fewer characters vs React</p>

  <div class="grid">
    <div class="col tooey">
      <h2>tooey (~285 chars)</h2>
      <pre>{s:{q:"",sort:"name",asc:true,data:[...]},r:[V,[
  [I,"",{ph:"search...",v:{$:"q"},x:["q","!"]}],
  [Tb,[
    [Th,[[Tr,[[Tc,"name",{c:sort}],[Tc,"age",{c:sort}],[Tc,"role",{c:sort}]]]]],
    [Tbd,[{map:"filtered",as:[Tr,[[Td,"$item.name"],[Td,"$item.age"],[Td,"$item.role"]]]}]]
  ]]
],{g:12}]}</pre>
      <div class="demo" id="tooey-app"></div>
    </div>
    <div class="col react">
      <h2>react (~1412 chars)</h2>
      <pre style="color:#f97;">function DataTable() {
  const [q, setQ] = useState('');
  const [sort, setSort] = useState('name');
  const [asc, setAsc] = useState(true);
  const [data] = useState([
    {name:"alice",age:28,role:"engineer"},
    {name:"bob",age:34,role:"designer"},
    ...
  ]);
  const filtered = data
    .filter(r => Object.values(r).some(v =>
      String(v).toLowerCase().includes(q.toLowerCase())))
    .sort((a,b) => {...});
  const toggleSort = (col) => {...};
  return (
    &lt;div style={{display:'flex',flexDirection:'column',gap:12}}&gt;
      &lt;input placeholder="search..." value={q}
        onChange={e=&gt;setQ(e.target.value)} /&gt;
      &lt;table&gt;
        &lt;thead&gt;
          &lt;tr&gt;
            &lt;th onClick={()=&gt;toggleSort('name')}&gt;name&lt;/th&gt;
            ...
          &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
          {filtered.map((row,i) =&gt; (
            &lt;tr key={i}&gt;
              &lt;td&gt;{row.name}&lt;/td&gt;
              ...
            &lt;/tr&gt;
          ))}
        &lt;/tbody&gt;
      &lt;/table&gt;
    &lt;/div&gt;
  );
}</pre>
      <div class="demo" id="react-app"></div>
    </div>
  </div>

  <script src="../dist/tooey.js"></script>
  <script>
    const data = [
      {name:"alice", age:28, role:"engineer"},
      {name:"bob", age:34, role:"designer"},
      {name:"carol", age:25, role:"manager"},
      {name:"david", age:31, role:"engineer"},
      {name:"eve", age:29, role:"designer"}
    ];

    // tooey demo - using signals
    const{signal}=tooey;
    const q = signal('');
    const sortCol = signal('name');
    const asc = signal(true);

    function renderTooey() {
      const el = document.getElementById('tooey-app');
      el.innerHTML = '';
      const main = document.createElement('div');
      main.style.cssText = 'display:flex;flex-direction:column;gap:12px';

      const input = document.createElement('input');
      input.placeholder = 'search...';
      input.value = q();
      input.addEventListener('input', e => q.set(e.target.value));
      main.appendChild(input);

      const table = document.createElement('table');
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');
      ['name', 'age', 'role'].forEach(col => {
        const th = document.createElement('th');
        const arrow = sortCol() === col ? (asc() ? ' ↑' : ' ↓') : '';
        th.textContent = col + arrow;
        th.addEventListener('click', () => {
          if (sortCol() === col) asc.set(!asc());
          else { sortCol.set(col); asc.set(true); }
        });
        headerRow.appendChild(th);
      });
      thead.appendChild(headerRow);
      table.appendChild(thead);

      const tbody = document.createElement('tbody');
      const filtered = data
        .filter(row => Object.values(row).some(v =>
          String(v).toLowerCase().includes(q().toLowerCase())))
        .sort((a, b) => {
          const av = a[sortCol()], bv = b[sortCol()];
          const cmp = av < bv ? -1 : av > bv ? 1 : 0;
          return asc() ? cmp : -cmp;
        });

      filtered.forEach(row => {
        const tr = document.createElement('tr');
        ['name', 'age', 'role'].forEach(col => {
          const td = document.createElement('td');
          td.textContent = row[col];
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
      table.appendChild(tbody);
      main.appendChild(table);
      el.appendChild(main);
    }
    q.sub(renderTooey);
    sortCol.sub(renderTooey);
    asc.sub(renderTooey);
    renderTooey();

    // react-style demo (vanilla JS)
    (function() {
      const el = document.getElementById('react-app');
      let qVal = '', sortColVal = 'name', ascVal = true;

      function render() {
        el.innerHTML = '';
        const main = document.createElement('div');
        main.style.cssText = 'display:flex;flex-direction:column;gap:12px';

        const input = document.createElement('input');
        input.placeholder = 'search...';
        input.value = qVal;
        input.addEventListener('input', e => { qVal = e.target.value; render(); });
        main.appendChild(input);

        const table = document.createElement('table');
        const thead = document.createElement('thead');
        const headerRow = document.createElement('tr');
        ['name', 'age', 'role'].forEach(col => {
          const th = document.createElement('th');
          const arrow = sortColVal === col ? (ascVal ? ' ↑' : ' ↓') : '';
          th.textContent = col + arrow;
          th.addEventListener('click', () => {
            if (sortColVal === col) ascVal = !ascVal;
            else { sortColVal = col; ascVal = true; }
            render();
          });
          headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);
        table.appendChild(thead);

        const tbody = document.createElement('tbody');
        const filtered = data
          .filter(row => Object.values(row).some(v =>
            String(v).toLowerCase().includes(qVal.toLowerCase())))
          .sort((a, b) => {
            const av = a[sortColVal], bv = b[sortColVal];
            const cmp = av < bv ? -1 : av > bv ? 1 : 0;
            return ascVal ? cmp : -cmp;
          });

        filtered.forEach(row => {
          const tr = document.createElement('tr');
          ['name', 'age', 'role'].forEach(col => {
            const td = document.createElement('td');
            td.textContent = row[col];
            tr.appendChild(td);
          });
          tbody.appendChild(tr);
        });
        table.appendChild(tbody);
        main.appendChild(table);
        el.appendChild(main);
      }
      render();
    })();
  </script>
</body>
</html>
