"use strict";var tooey=(()=>{var D=Object.defineProperty;var ue=Object.getOwnPropertyDescriptor;var fe=Object.getOwnPropertyNames;var de=Object.prototype.hasOwnProperty;var ge=(e,n)=>{for(var o in n)D(e,o,{get:n[o],enumerable:!0})},pe=(e,n,o,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of fe(n))!de.call(e,u)&&u!==o&&D(e,u,{get:()=>n[u],enumerable:!(r=ue(n,u))||r.enumerable});return e};var me=e=>pe(D({},"__esModule",{value:!0}),e);var fn={};ge(fn,{$:()=>Le,In:()=>je,Td:()=>Fe,Tr:()=>Ue,async$:()=>ke,batch:()=>K,bd:()=>ze,bt:()=>xe,cb:()=>Be,computed:()=>Ee,createRouterView:()=>ce,createTooey:()=>Pe,cx:()=>be,devtools:()=>un,dv:()=>U,effect:()=>A,fr:()=>Ze,gr:()=>Ve,hs:()=>Ie,hy:()=>tn,im:()=>Ge,li:()=>Je,lk:()=>cn,ln:()=>ie,mm:()=>Re,nav:()=>ae,ol:()=>Ye,ot:()=>ln,rd:()=>De,rd$:()=>ve,ref:()=>ye,render:()=>X,rt:()=>an,rts:()=>nn,signal:()=>F,sl:()=>_e,sv:()=>Qe,ta:()=>Oe,tb:()=>We,tc:()=>Ke,th:()=>qe,tx:()=>oe,ul:()=>Xe,ux:()=>Se,vs:()=>$e});function ye(e=null){return{el:e}}var he=0,B=new Map;function be(e){let n=he++;return B.set(n,[e]),{_id:n,_default:e}}function Se(e){let n=B.get(e._id);return!n||n.length===0?e._default:n[n.length-1]}function Te(e,n){let o=B.get(e._id);o&&o.push(n)}function we(e){let n=B.get(e._id);n&&n.length>1&&n.pop()}function O(e){return typeof e=="object"&&e!==null&&"boundary"in e&&e.boundary===!0}function G(e){let n=document.createElement("div");return n.style.cssText="padding:12px;background:#fee;border:1px solid #fcc;border-radius:4px;color:#c00;font-family:monospace;font-size:12px",n.textContent=`[tooey error] ${e.message}`,n}var v=null,x=0,_=new Set;function F(e){let n=e,o=new Set,r=(()=>(v&&o.add(v),n));return r.set=u=>{let f=typeof u=="function"?u(n):u;f!==n&&(n=f,x>0?o.forEach(t=>_.add(t)):o.forEach(t=>t()))},r.sub=u=>(o.add(u),()=>o.delete(u)),r}function K(e){x++;try{e()}finally{if(x--,x===0){let n=_;_=new Set,n.forEach(o=>o())}}}function A(e,n){let o=!0,r=()=>{if(o){v=r;try{e()}finally{v=null}}};r();let u=()=>{o=!1,v=null};return n&&n.cleanups.push(u),u}function Ee(e){let n,o=!0,r=new Set,u=()=>{o=!0,x>0?r.forEach(t=>_.add(t)):r.forEach(t=>t())},f=(()=>{if(v&&r.add(v),o){let t=v;v=u;try{n=e()}finally{v=t}o=!1}return n});return f.sub=t=>(r.add(t),()=>r.delete(t)),f}function ke(e,n){return{s:{data:null,loading:!0,error:null},async init(o){try{let u=await(typeof e=="function"?e():e);o.set("data",u),o.set("loading",!1)}catch(r){let u=r instanceof Error?r.message:String(r);o.set("error",u),o.set("loading",!1),n?.onError&&r instanceof Error&&n.onError(r)}}}}function ve(e,n){let o=n,r=null,u=t=>{let s=e(o,t);s!==o&&(o=s,r&&K(()=>{Object.entries(s).forEach(([c,a])=>{r.set(c,a)})}))};return{s:new Proxy(n,{get(t,s){return t[s]}}),dp:u,_bind(t){r=t}}}function Re(e,n){let o=null,r,f=n||((t,s)=>{if(t===s)return!0;if(!t||!s)return!1;let c=Object.keys(t),a=Object.keys(s);return c.length!==a.length?!1:c.every(l=>t[l]===s[l])});return(t,s)=>(o&&f(r,t)||(r=t,o=e(t,s)),o)}function Z(e,n,o){try{switch(n){case"+":e.set(r=>r+(typeof o=="number"?o:1));break;case"-":e.set(r=>r-(typeof o=="number"?o:1));break;case"!":e.set(o);break;case"~":e.set(r=>!r);break;case"<":e.set(r=>[...r,o]);break;case">":e.set(r=>[o,...r]);break;case"X":e.set(r=>{let u=r;return typeof o=="number"?u.filter((f,t)=>t!==o):typeof o=="function"?u.filter((f,t)=>!o(f,t)):u.filter(f=>f!==o)});break;case".":Array.isArray(o)&&o.length===2&&e.set(r=>({...r,[o[0]]:o[1]}));break}}catch(r){console.warn("[tooey] state operation error:",n,r)}}function C(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&"$"in e}function $(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&("if"in e||"?"in e)}function I(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&("map"in e||"m"in e)}function ee(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&"pv"in e}function ne(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&"pt"in e}function te(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&"mm"in e&&"c"in e}function V(e,n){if(C(e)){let o=n[e.$];if(!o){console.warn(`[tooey] unknown state key: "${e.$}"`);return}return o()}return e}function Ne(e){if(e!==void 0)return typeof e=="number"?`${e}px`:e}function Ae(e,n){if(!n)return;let o=["colors","spacing","radius","fonts"];for(let r of o){let u=n[r];if(u&&e in u)return u[e]}for(let[r,u]of Object.entries(n))if(u&&!o.includes(r)&&e in u)return u[e]}var z={c:"center",sb:"space-between",sa:"space-around",se:"space-evenly",fe:"flex-end",fs:"flex-start",st:"stretch",bl:"baseline"};function W(e){if(e!==void 0)return z[e]||e}function re(e){if(typeof e!="string"||e.length<2)return null;let n=e[e.length-1];if(n==="+"||n==="-"||n==="~")return[e.slice(0,-1),n];let o=e.indexOf("!");if(o>0){let r=e.slice(0,o),u=e.slice(o+1),f=u;return u==="true"?f=!0:u==="false"?f=!1:!isNaN(Number(u))&&u!==""&&(f=Number(u)),[r,"!",f]}return null}var Ce=["http:","https:","mailto:","tel:","ftp:"];function He(e){if(!e||typeof e!="string")return!1;if(e.startsWith("/")||e.startsWith("#")||e.startsWith("."))return!0;try{let n=new URL(e,window.location.href);return Ce.includes(n.protocol)}catch{let n=e.toLowerCase().trim();return!["javascript:","data:","vbscript:"].some(r=>n.startsWith(r))}}function Q(e,n){return e?He(e)?e:(console.warn(`[tooey] blocked unsafe URL in ${n}: "${e.slice(0,50)}..."`),null):null}function N(e,n,o,r,u){if(typeof e=="function")return e;let f;if(typeof e=="string"){let a=re(e);a?f=a:u==="+"?f=[e,"+"]:u==="-"?f=[e,"-"]:f=[e,"~"]}else f=e;let[t,s,c]=f;return()=>{let a=n[t];if(!a){console.warn(`[tooey] click handler: unknown state key "${t}"`);return}let l=c;if(r&&typeof l=="string"){if(l==="$index")l=r.index;else if(l==="$item")l=r.item;else if(l.startsWith("$item.")){let p=l.substring(6);l=r.item?.[p]}}if(s==="!"&&c===void 0&&o){let p=o.target;l=p.type==="checkbox"?p.checked:p.value}Z(a,s,l)}}function q(e,n){if(e!==void 0){if(typeof e=="string"&&e.startsWith("$")){let o=e.slice(1),r=Ae(o,n);if(r!==void 0)return r;console.warn(`[tooey] unknown theme token: "${e}"`);return}return e}}function Me(e,n,o){let r=e.style,u=t=>{let s=q(t,o);return Ne(s)},f=t=>{if(t===void 0)return;let s=q(t,o);return s!==void 0?String(s):void 0};if(n.g!==void 0){let t=u(n.g);t&&(r.gap=t)}if(n.p!==void 0){let t=u(n.p);t&&(r.padding=t)}if(n.m!==void 0){let t=u(n.m);t&&(r.margin=t)}if(n.w!==void 0){let t=u(n.w);t&&(r.width=t)}if(n.h!==void 0){let t=u(n.h);t&&(r.height=t)}if(n.mw!==void 0){let t=u(n.mw);t&&(r.maxWidth=t)}if(n.mh!==void 0){let t=u(n.mh);t&&(r.maxHeight=t)}if(n.bg!==void 0){let t=f(n.bg);t&&(r.background=t)}if(n.fg!==void 0){let t=f(n.fg);t&&(r.color=t)}if(n.o!==void 0&&(r.opacity=String(n.o)),n.r!==void 0){let t=u(n.r);t&&(r.borderRadius=t)}if(n.bw!==void 0){let t=u(n.bw);t&&(r.borderWidth=t)}if(n.bc!==void 0){let t=f(n.bc);t&&(r.borderColor=t)}if(n.bs!==void 0&&(r.borderStyle=n.bs),n.pos!==void 0){let t={rel:"relative",abs:"absolute",fix:"fixed",sticky:"sticky"};r.position=t[n.pos]||n.pos}if(n.z!==void 0&&(r.zIndex=String(n.z)),n.t!==void 0){let t=u(n.t);t&&(r.top=t)}if(n.l!==void 0){let t=u(n.l);t&&(r.left=t)}if(typeof n.b=="number"||typeof n.b=="string"&&!Array.isArray(n.b)){let t=u(n.b);t&&(r.bottom=t)}if(n.rt!==void 0){let t=u(n.rt);t&&(r.right=t)}if(n.fs!==void 0){let t=u(n.fs);t&&(r.fontSize=t)}if(n.fw!==void 0&&(r.fontWeight=String(n.fw)),n.ff!==void 0){let t=f(n.ff);t&&(r.fontFamily=t)}if(n.ta!==void 0&&(r.textAlign=n.ta),n.td!==void 0&&(r.textDecoration=n.td),n.lh!==void 0&&(r.lineHeight=typeof n.lh=="number"?String(n.lh):n.lh),n.ls!==void 0){let t=u(n.ls);t&&(r.letterSpacing=t)}if(n.ai!==void 0&&(r.alignItems=W(n.ai)),n.jc!==void 0&&(r.justifyContent=W(n.jc)),n.flw!==void 0&&(r.flexWrap=W(n.flw)),n.cur!==void 0&&(r.cursor=n.cur),n.ov!==void 0&&(r.overflow=n.ov),n.pe!==void 0&&(r.pointerEvents=n.pe),n.us!==void 0&&(r.userSelect=n.us),n.sh!==void 0){let t=f(n.sh);t&&(r.boxShadow=t)}n.tr!==void 0&&(r.transform=n.tr),n.s&&Object.entries(n.s).forEach(([t,s])=>{let c=q(s,o);c!==void 0&&(r[t]=String(c))})}function S(e,n,o){let{state:r}=n;if(O(e)){let i=document.createElement("div");i.style.display="contents";try{let d={cleanups:[],state:r,onError:e.onError||n.onError},g=S(e.child,d,o);g&&(i.appendChild(g),n.cleanups.push(...d.cleanups))}catch(d){let g={message:d instanceof Error?d.message:String(d),stack:d instanceof Error?d.stack:void 0};if(e.onError&&e.onError(g),e.fallback)try{let m=S(e.fallback,n,o);m&&i.appendChild(m)}catch{i.appendChild(G(g))}else i.appendChild(G(g))}return i}if($(e)){let i=document.createElement("div");i.style.display="contents";let d=null,g=null,m=e.if??e["?"],y=e.then??e.t,h=e.else??e.e,w=e.eq??e.is;return A(()=>{g&&(g.cleanups.forEach(k=>k()),g.cleanups=[]),d&&(i.innerHTML="",d=null);let E=typeof m=="string"?r[m]?.():V(m,r),R;w!==void 0?R=E===w:R=!!E;let b=R?y:h;b&&(g={cleanups:[],state:r},Array.isArray(b)&&b.length>0&&Array.isArray(b[0])?b.forEach(k=>{let H=S(k,g,o);H&&i.appendChild(H)}):(d=S(b,g,o),d&&i.appendChild(d)))},n),i}if(I(e)){let i=document.createElement("div");i.style.display="contents";let d=null,g=e.map??e.m,m=e.as??e.a;return A(()=>{d&&(d.cleanups.forEach(w=>w()),d.cleanups=[]),i.innerHTML="";let h=typeof g=="string"?r[g]?.():V(g,r);!Array.isArray(h)||!m||(d={cleanups:[],state:r},h.forEach((w,T)=>{let E=S(m,d,{item:w,index:T});E&&i.appendChild(E)}))},n),i}if(ee(e)){let i=document.createElement("div");return i.style.display="contents",Te(e.pv,e.v),(Array.isArray(e.c)&&e.c.length>0&&Array.isArray(e.c[0])?e.c:[e.c]).forEach(g=>{let m=S(g,n,o);m&&i.appendChild(m)}),n.cleanups.push(()=>we(e.pv)),i}if(ne(e)){let i=typeof e.pt=="string"?document.querySelector(e.pt):e.pt;if(!i)return console.warn(`[tooey] portal target not found: ${e.pt}`),null;let d=document.createElement("div");d.style.display="contents",d.setAttribute("data-tooey-portal","true"),(Array.isArray(e.c)&&e.c.length>0&&Array.isArray(e.c[0])?e.c:[e.c]).forEach(y=>{let h=S(y,n,o);h&&d.appendChild(h)}),i.appendChild(d),n.cleanups.push(()=>{d.parentNode&&d.parentNode.removeChild(d)});let m=document.createElement("div");return m.style.display="none",m.setAttribute("data-tooey-portal-anchor","true"),m}if(te(e)){let i=document.createElement("div");i.style.display="contents";let d=null,g=null,m=[];return A(()=>{let h=e.mm.map(T=>r[T]?.());!(m.length===0||h.some((T,E)=>T!==m[E]))&&d||(m=h,g&&(g.cleanups.forEach(T=>T()),g.cleanups=[]),d&&(i.innerHTML="",d=null),g={cleanups:[],state:r,theme:n.theme,plugins:n.plugins},d=S(e.c,g,o),d&&(i.appendChild(d),n.cleanups.push(...g.cleanups)))},n),i}if(!Array.isArray(e)||e.length===0)return console.warn("[tooey] invalid node spec:",e),null;let u=e;if(n.plugins)for(let i of n.plugins)i.beforeRender&&(u=i.beforeRender(u,n));if(!Array.isArray(u))return S(u,n,o);let[f,t,s={}]=u;if(typeof f=="function"){let i=Array.isArray(t)&&t.length>0&&(Array.isArray(t[0])||$(t[0])||I(t[0])||typeof t[0]=="function")?t:void 0,d=f(s,i);return S(d,n,o)}let c=f;if(s.show!==void 0){let i=s.show,d=document.createElement("div");d.style.display="contents";let g=null,m=null;return A(()=>{if(m&&(m.cleanups.forEach(E=>E()),m.cleanups=[]),g&&(d.innerHTML="",g=null),!r[i]?.())return;let{show:w,...T}=s;m={cleanups:[],state:r,theme:n.theme,plugins:n.plugins},g=S([c,t,T],m,o),g&&(d.appendChild(g),n.cleanups.push(...m.cleanups))},n),d}let a;switch(c){case"vs":a=document.createElement("div"),a.style.display="flex",a.style.flexDirection="column";break;case"hs":a=document.createElement("div"),a.style.display="flex",a.style.flexDirection="row";break;case"gr":a=document.createElement("div"),a.style.display="grid",s.cols&&(a.style.gridTemplateColumns=typeof s.cols=="number"?`repeat(${s.cols}, 1fr)`:s.cols),s.rows&&(a.style.gridTemplateRows=typeof s.rows=="number"?`repeat(${s.rows}, 1fr)`:s.rows);break;case"dv":a=document.createElement("div");break;case"tx":a=document.createElement("span");break;case"bt":a=document.createElement("button");break;case"in":a=document.createElement("input"),a.type=s.type||"text",s.ph&&(a.placeholder=s.ph),s.ro&&(a.readOnly=!0);break;case"ta":a=document.createElement("textarea"),s.ph&&(a.placeholder=s.ph),s.rw&&(a.rows=s.rw),s.ro&&(a.readOnly=!0);break;case"sl":a=document.createElement("select"),s.opts&&s.opts.forEach(i=>{let d=document.createElement("option");d.value=i.v,d.textContent=i.l,a.appendChild(d)});break;case"cb":a=document.createElement("input"),a.type="checkbox";break;case"rd":a=document.createElement("input"),a.type="radio";break;case"tb":a=document.createElement("table");break;case"th":a=document.createElement("thead");break;case"bd":a=document.createElement("tbody");break;case"tr":a=document.createElement("tr");break;case"td":a=document.createElement("td"),s.sp&&(a.colSpan=s.sp),s.rsp&&(a.rowSpan=s.rsp);break;case"tc":a=document.createElement("th"),s.sp&&(a.colSpan=s.sp),s.rsp&&(a.rowSpan=s.rsp);break;case"ul":a=document.createElement("ul");break;case"ol":a=document.createElement("ol");break;case"li":a=document.createElement("li");break;case"im":if(a=document.createElement("img"),s.src){let i=Q(s.src,"src");i&&(a.src=i)}s.alt&&(a.alt=s.alt);break;case"ln":if(a=document.createElement("a"),s.href){let i=Q(s.href,"href");i&&(a.href=i)}break;case"sv":a=document.createElementNS("http://www.w3.org/2000/svg","svg");break;case"fr":a=document.createElement("div"),a.style.display="contents",a.setAttribute("data-tooey-fragment","true");break;default:console.warn(`[tooey] unknown component type: ${c}`),a=document.createElement("div")}if(s.rf&&(typeof s.rf=="function"?s.rf(a):s.rf.el=a),s.cls&&(a.className=s.cls),s.id&&(a.id=s.id),s.dis&&(a.disabled=!0),Me(a,s,n.theme),t!==void 0){if(Array.isArray(t)&&t.length>0&&(Array.isArray(t[0])||$(t[0])||I(t[0])||O(t[0])))t.forEach(i=>{let d=S(i,n,o);d&&a.appendChild(d)});else if($(t)||I(t)||O(t)){let i=S(t,n,o);i&&a.appendChild(i)}else if(C(t))A(()=>{let i=V(t,r);c==="in"||c==="ta"?a.value=String(i??""):c==="cb"||c==="rd"?a.checked=!!i:a.textContent=String(i??"")},n);else if(typeof t=="string"||typeof t=="number"){let i=String(t);o&&(typeof o.item=="object"&&o.item!==null&&(i=i.replace(/\$item\.(\w+)/g,(d,g)=>String(o.item[g]??""))),i=i.replace(/\$item/g,String(o.item)),i=i.replace(/\$index/g,String(o.index))),c==="in"||c==="ta"?a.value=i:c!=="sl"&&(a.textContent=i)}}s.v!==void 0&&C(s.v)&&A(()=>{let i=V(s.v,r);c==="in"||c==="sl"||c==="ta"?a.value=String(i??""):(c==="cb"||c==="rd")&&(a.checked=!!i)},n),s.ch!==void 0&&(C(s.ch)?A(()=>{let i=V(s.ch,r);a.checked=!!i},n):a.checked=!!s.ch);let l=(i,d)=>{a.addEventListener(i,d),n.cleanups.push(()=>a.removeEventListener(i,d))},p=c==="bt"&&(typeof t=="string"||typeof t=="number")?String(t):void 0;if(s.c&&l("click",i=>N(s.c,r,i,o,p)()),s.x){let i=s.x;l("input",d=>{if(typeof i=="function")i();else{let g,m;if(typeof i=="string"){let h=re(i);h?[g,m]=h:(g=i,m="!")}else[g,m]=i;let y=r[g];if(y){let h=d.target,w=c==="cb"||c==="rd"?h.checked:h.value;Z(y,m,w)}}})}if(s.f&&l("focus",i=>N(s.f,r,i,o)()),s.bl&&l("blur",i=>N(s.bl,r,i,o)()),s.k&&l("keydown",i=>N(s.k,r,i,o)()),s.ku&&l("keyup",i=>N(s.ku,r,i,o)()),s.kp&&l("keypress",i=>N(s.kp,r,i,o)()),s.e&&l("mouseenter",i=>N(s.e,r,i,o)()),s.lv&&l("mouseleave",i=>N(s.lv,r,i,o)()),s.sub&&l("submit",i=>{i.preventDefault(),N(s.sub,r,i,o)()}),n.plugins)for(let i of n.plugins)i.afterRender&&i.afterRender(a,u);return a}function X(e,n,o){if(!e)throw new Error("[tooey] render requires a valid container element");if(!n||!n.r)throw new Error("[tooey] render requires a spec with a root node (r)");let r=o?.theme,u=o?.plugins||[],f=(l,p)=>{let i=F(p),d=i.set.bind(i);return i.set=g=>{let m=i();d(g);let y=i();m!==y&&u.forEach(h=>h.onStateChange?.(l,m,y))},i},t={};n.s&&Object.entries(n.s).forEach(([l,p])=>{t[l]=f(l,p)});let s={cleanups:[],state:t,theme:r,plugins:u};e.innerHTML="";let c=S(n.r,s);c&&e.appendChild(c);let a={state:t,el:c,destroy(){u.forEach(l=>l.onDestroy?.(a)),s.cleanups.forEach(l=>l()),s.cleanups=[],e.innerHTML=""},update(l){if(l.s&&K(()=>{Object.entries(l.s).forEach(([p,i])=>{t[p]?t[p].set(i):t[p]=f(p,i)})}),l.r){s.cleanups.forEach(i=>i()),s.cleanups=[],e.innerHTML="";let p=S(l.r,s);p&&e.appendChild(p),a.el=p}},get(l){return t[l]?.()},set(l,p){t[l]&&t[l].set(p)}};return u.forEach(l=>{l.extend&&Object.entries(l.extend).forEach(([p,i])=>{a[p]=i.bind(a)})}),u.forEach(l=>l.onInit?.(a)),a}function Pe(e){let n=e&&("theme"in e||"plugins"in e),o=n?e.theme:e,r=n?e.plugins:void 0;return{render:(u,f)=>X(u,f,{theme:o,plugins:r}),theme:o,plugins:r}}function Le(e){return{$:e}}var $e="vs",Ie="hs",U="dv",Ve="gr",oe="tx",xe="bt",je="in",Oe="ta",_e="sl",Be="cb",De="rd",We="tb",qe="th",ze="bd",Ue="tr",Fe="td",Ke="tc",Xe="ul",Ye="ol",Je="li",Ge="im",ie="ln",Qe="sv",Ze="fr";function en(e,n={},o){let r={};Object.entries(n).forEach(([c,a])=>{let l=(()=>a);l.set=()=>{},l.sub=()=>()=>{},r[c]=l});function u(c){if(C(c)){let a=r[c.$]?.();return a!=null?String(a):""}return String(c??"")}function f(c){if(c!==void 0){if(typeof c=="string"&&c.startsWith("$")&&o){let a=c.slice(1),l=["colors","spacing","radius","fonts"];for(let p of l){let i=o[p];if(i&&a in i){let d=i[a];return typeof d=="number"?`${d}px`:String(d)}}}return typeof c=="number"?`${c}px`:c}}function t(c){let a=[];if(c.g!==void 0){let l=f(c.g);l&&a.push(`gap:${l}`)}if(c.p!==void 0){let l=f(c.p);l&&a.push(`padding:${l}`)}if(c.m!==void 0){let l=f(c.m);l&&a.push(`margin:${l}`)}if(c.w!==void 0){let l=f(c.w);l&&a.push(`width:${l}`)}if(c.h!==void 0){let l=f(c.h);l&&a.push(`height:${l}`)}if(c.bg!==void 0){let l=f(c.bg);l&&a.push(`background:${l}`)}if(c.fg!==void 0){let l=f(c.fg);l&&a.push(`color:${l}`)}if(c.r!==void 0){let l=f(c.r);l&&a.push(`border-radius:${l}`)}if(c.fs!==void 0){let l=f(c.fs);l&&a.push(`font-size:${l}`)}return c.fw!==void 0&&a.push(`font-weight:${c.fw}`),c.ai!==void 0&&a.push(`align-items:${z[c.ai]||c.ai}`),c.jc!==void 0&&a.push(`justify-content:${z[c.jc]||c.jc}`),a.join(";")}function s(c){if($(c)){let b=c.if??c["?"],k=c.then??c.t,H=c.else??c.e,M=c.eq??c.is,j=typeof b=="string"?r[b]?.():C(b)?r[b.$]?.():b,P=(M!==void 0?j===M:!!j)?k:H;return P?Array.isArray(P)&&P.length>0&&Array.isArray(P[0])?P.map(s).join(""):s(P):""}if(I(c)){let b=c.map??c.m,k=c.as??c.a;if(!k)return"";let H=typeof b=="string"?r[b]?.():C(b)?r[b.$]?.():b;return Array.isArray(H)?H.map((M,j)=>{let J=typeof M=="object"?JSON.stringify(M):String(M);return s(k).replace(/\$item\.(\w+)/g,(P,le)=>String(M?.[le]??"")).replace(/\$item/g,J).replace(/\$index/g,String(j))}).join(""):""}if(ee(c))return(Array.isArray(c.c)&&c.c.length>0&&Array.isArray(c.c[0])?c.c:[c.c]).map(s).join("");if(ne(c))return"<!-- portal -->";if(te(c))return s(c.c);if(O(c))try{return s(c.child)}catch{return c.fallback?s(c.fallback):"<div>[error]</div>"}if(!Array.isArray(c)||c.length===0)return"";let[a,l,p={}]=c;if(typeof a=="function"){let b=Array.isArray(l)&&l.length>0&&Array.isArray(l[0])?l:void 0,k=a(p,b);return s(k)}let i=a,g={vs:"div",hs:"div",dv:"div",gr:"div",fr:"div",tx:"span",bt:"button",in:"input",ta:"textarea",sl:"select",cb:"input",rd:"input",tb:"table",th:"thead",bd:"tbody",tr:"tr",td:"td",tc:"th",ul:"ul",ol:"ol",li:"li",im:"img",ln:"a",sv:"svg"}[i]||"div",m=["input","img"].includes(g),y=[],h="";i==="vs"&&(h="display:flex;flex-direction:column;"),i==="hs"&&(h="display:flex;flex-direction:row;"),i==="gr"&&(h="display:grid;"),i==="fr"&&(h="display:contents;");let w=t(p),T=h+w;T&&y.push(`style="${T}"`),p.cls&&y.push(`class="${p.cls}"`),p.id&&y.push(`id="${p.id}"`),p.dis&&y.push("disabled"),p.href&&y.push(`href="${p.href}"`),p.src&&y.push(`src="${p.src}"`),p.alt&&y.push(`alt="${p.alt}"`),p.ph&&y.push(`placeholder="${p.ph}"`),p.type&&y.push(`type="${p.type}"`),i==="cb"&&y.push('type="checkbox"'),i==="rd"&&y.push('type="radio"'),y.push('data-tooey-ssr="true"');let E=y.length>0?" "+y.join(" "):"";if(m)return`<${g}${E}/>`;let R="";return l!==void 0&&(Array.isArray(l)&&l.length>0&&(Array.isArray(l[0])||$(l[0])||I(l[0]))?R=l.map(s).join(""):$(l)||I(l)?R=s(l):(typeof l=="string"||typeof l=="number"||C(l))&&(R=u(l))),i==="sl"&&p.opts&&(R=p.opts.map(b=>`<option value="${b.v}">${b.l}</option>`).join("")),`<${g}${E}>${R}</${g}>`}return s(e)}function nn(e,n){return en(e.r,e.s||{},n?.theme)}function tn(e,n,o){return X(e,n,o)}var L=null,Y="";function se(e=""){if(L)return L;Y=e;let n=()=>{let o=window.location.pathname.replace(e,"")||"/",r={};return new URLSearchParams(window.location.search).forEach((u,f)=>{r[f]=u}),{path:o,params:{},query:r}};return L=F(n()),window.addEventListener("popstate",()=>{L?.set(n())}),L}function ae(e,n){let o=Y+e;if(n?.replace?window.history.replaceState(null,"",o):window.history.pushState(null,"",o),L){let r={};new URLSearchParams(window.location.search).forEach((u,f)=>{r[f]=u}),L.set({path:e,params:{},query:r})}}function rn(e,n){let o=e.split("/").filter(Boolean),r=n.split("/").filter(Boolean);if(o.length!==r.length&&!o.some(f=>f==="*"))return{match:!1,params:{}};let u={};for(let f=0;f<o.length;f++){let t=o[f],s=r[f];if(t==="*")return{match:!0,params:u};if(t.startsWith(":"))u[t.slice(1)]=s||"";else if(t!==s)return{match:!1,params:{}}}return{match:!0,params:u}}var on=e=>{let n=e?.routes||[],o=e?.base||"";return se(o),{"?":{$:"_routerMatch"},t:[U,"Route matched"],e:[U,"No route matched"]}};function ce(e,n=""){let o=se(n);return[()=>{let{path:u}=o();for(let f of e){let{match:t,params:s}=rn(f.p,u);if(t)return Object.keys(s).length>0&&o.set(c=>({...c,params:s})),typeof f.c=="function"?f.c({params:s}):f.c}return[oe,""]}]}var sn=(e,n)=>{let o=e?.to||"/";return[ie,n||o,{href:Y+o,c:()=>{ae(o)},cls:e?.cls}]},an=on,cn=sn;function ln(e){return ce(e)}function un(e){let n=e?.name||"tooey",o=e?.log??!0,r=[];return{name:"devtools",onInit(u){o&&console.log(`[${n}] initialized`,{state:Object.fromEntries(Object.entries(u.state).map(([f,t])=>[f,t()]))}),typeof window<"u"&&(window.__TOOEY_DEVTOOLS__={instance:u,getState:()=>Object.fromEntries(Object.entries(u.state).map(([f,t])=>[f,t()])),setState:(f,t)=>u.set(f,t),getHistory:()=>r,clearHistory:()=>{r=[]}})},onDestroy(u){o&&console.log(`[${n}] destroyed`),typeof window<"u"&&delete window.__TOOEY_DEVTOOLS__},onStateChange(u,f,t){r.push({timestamp:Date.now(),key:u,oldVal:f,newVal:t}),r.length>100&&(r=r.slice(-100)),o&&console.log(`[${n}] state change:`,u,f,"\u2192",t)}}}return me(fn);})();
if(typeof module!=="undefined")module.exports=tooey;
//# sourceMappingURL=tooey.js.map
