"use strict";var p=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var f=Object.prototype.hasOwnProperty;var m=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},q=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of l(t))!f.call(e,o)&&o!==n&&p(e,o,{get:()=>t[o],enumerable:!(r=R(t,o))||r.enumerable});return e};var w=e=>q(p({},"__esModule",{value:!0}),e);var P={};m(P,{createBunHandler:()=>A,createCfHandler:()=>x,createDenoHandler:()=>h,createFetchHandler:()=>a,createHandler:()=>u,createVercelHandler:()=>H,edgeAdapter:()=>i});module.exports=w(P);function u(e,t){return async(n,r)=>{let o=await e.toRequest(n),s=await t(o);return e.toResponse(s,r)}}var i={name:"edge",async toRequest(e){let t=e,n=t.url,r=t.method,o={};t.headers.forEach((d,c)=>{o[c.toLowerCase()]=d});let s;return["POST","PUT","PATCH"].includes(r)&&(s=await y(t)),{url:n,method:r,headers:o,body:s}},toResponse(e){let t={status:e.status,headers:e.headers};return typeof e.body=="string"?new Response(e.body,t):e.body instanceof ReadableStream?new Response(e.body,t):new Response(null,t)}};async function y(e){let t=e.headers.get("content-type")||"";try{if(t.includes("application/json"))return await e.json();if(t.includes("application/x-www-form-urlencoded")){let n=await e.text();return Object.fromEntries(new URLSearchParams(n))}if(t.includes("multipart/form-data")){let n=await e.formData(),r={};return n.forEach((o,s)=>{r[s]=o}),r}return await e.text()}catch{return}}function a(e){let t=u(i,e);return async n=>{try{return await t(n)}catch(r){return console.error("[tooey/server] request error:",r),new Response(JSON.stringify({error:"internal server error"}),{status:500,headers:{"Content-Type":"application/json"}})}}}function x(e){let t=a(e);return async(n,r,o)=>t(n)}function h(e){return a(e)}function H(e){return a(e)}function A(e){return a(e)}
//# sourceMappingURL=edge.js.map
