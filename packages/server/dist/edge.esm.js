function u(e,t){return async(n,r)=>{let o=await e.toRequest(n),s=await t(o);return e.toResponse(s,r)}}var d={name:"edge",async toRequest(e){let t=e,n=t.url,r=t.method,o={};t.headers.forEach((p,i)=>{o[i.toLowerCase()]=p});let s;return["POST","PUT","PATCH"].includes(r)&&(s=await c(t)),{url:n,method:r,headers:o,body:s}},toResponse(e){let t={status:e.status,headers:e.headers};return typeof e.body=="string"?new Response(e.body,t):e.body instanceof ReadableStream?new Response(e.body,t):new Response(null,t)}};async function c(e){let t=e.headers.get("content-type")||"";try{if(t.includes("application/json"))return await e.json();if(t.includes("application/x-www-form-urlencoded")){let n=await e.text();return Object.fromEntries(new URLSearchParams(n))}if(t.includes("multipart/form-data")){let n=await e.formData(),r={};return n.forEach((o,s)=>{r[s]=o}),r}return await e.text()}catch{return}}function a(e){let t=u(d,e);return async n=>{try{return await t(n)}catch(r){return console.error("[tooey/server] request error:",r),new Response(JSON.stringify({error:"internal server error"}),{status:500,headers:{"Content-Type":"application/json"}})}}}function f(e){let t=a(e);return async(n,r,o)=>t(n)}function m(e){return a(e)}function q(e){return a(e)}function w(e){return a(e)}export{w as createBunHandler,f as createCfHandler,m as createDenoHandler,a as createFetchHandler,u as createHandler,q as createVercelHandler,d as edgeAdapter};
//# sourceMappingURL=edge.esm.js.map
