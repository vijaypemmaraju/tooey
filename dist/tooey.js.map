{
  "version": 3,
  "sources": ["../src/tooey.ts"],
  "sourcesContent": ["/**\n * tooey - token-efficient ui library for llms\n *\n * component types:\n *   layout: V (vstack), H (hstack), D (div), G (grid)\n *   text & buttons: T (text/span), B (button)\n *   inputs: I (input), Ta (textarea), S (select), C (checkbox), R (radio)\n *   tables: Tb (table), Th (thead), Tbd (tbody), Tr (tr), Td (td), Tc (th)\n *   lists: Ul (ul), Ol (ol), Li (li)\n *   media & links: M (image), L (link), Sv (svg)\n *\n * props (short keys):\n *   spacing: g (gap), p (padding), m (margin), w (width), h (height), mw, mh\n *   colors: bg (background), fg (color), o (opacity)\n *   borders: r (border-radius), bw (border-width), bc (border-color), bs (border-style)\n *   positioning: pos (position), z (z-index), t (top), l (left), rt (right)\n *   typography: fs (font-size), fw (font-weight), ff (font-family), ta, td, lh, ls\n *   layout: ai (align-items), jc (justify-content), flw (flex-wrap), cols, rows\n *   misc: cur (cursor), ov (overflow), pe (pointer-events), us (user-select), sh, tr\n *   element-specific: v (value), ph (placeholder), type, href, src, alt, dis, ch, ro, opts\n *\n * events: c (click), x (input/change), f (focus), bl (blur), k (keydown), ku, kp, e, lv, sub\n *\n * state operations: + (increment), - (decrement), ! (set), ~ (toggle), < (append), > (prepend), X (remove), . (set prop)\n *\n * control flow: {if: state, then: [...], else: [...]} | {map: state, as: [...]}\n */\n\n// ============ types ============\n\ntype StateValue = unknown;\ntype StateStore = Record<string, Signal<StateValue>>;\n\ninterface Signal<T> {\n  (): T;\n  set(v: T | ((prev: T) => T)): void;\n  sub(fn: () => void): () => void;\n}\n\ntype Op = '+' | '-' | '!' | '~' | '<' | '>' | 'X' | '.';\ntype EventHandler = [string, Op, unknown?] | (() => void);\n\ninterface Props {\n  // spacing/sizing\n  g?: number | string;\n  p?: number | string;\n  m?: number | string;\n  w?: number | string;\n  h?: number | string;\n  mw?: number | string;\n  mh?: number | string;\n  // colors\n  bg?: string;\n  fg?: string;\n  o?: number;\n  // borders\n  r?: number | string;\n  bw?: number | string;\n  bc?: string;\n  bs?: string;\n  // positioning\n  pos?: 'rel' | 'abs' | 'fix' | 'sticky' | string;\n  z?: number;\n  t?: number | string;\n  l?: number | string;\n  b?: number | string;\n  rt?: number | string;\n  // typography\n  fs?: number | string;\n  fw?: number | string;\n  ff?: string;\n  ta?: string;\n  td?: string;\n  lh?: number | string;\n  ls?: number | string;\n  // layout\n  ai?: string;\n  jc?: string;\n  flw?: string;\n  cols?: number | string;\n  rows?: number | string;\n  // misc\n  cur?: string;\n  ov?: string;\n  pe?: string;\n  us?: string;\n  sh?: string;\n  tr?: string;\n  // element-specific\n  v?: unknown;\n  ph?: string;\n  type?: string;\n  href?: string;\n  src?: string;\n  alt?: string;\n  dis?: boolean;\n  ch?: unknown;\n  ro?: boolean;\n  opts?: Array<{v: string, l: string}>;\n  cls?: string;\n  id?: string;\n  rw?: number;\n  sp?: number;\n  rsp?: number;\n  // events\n  c?: EventHandler;\n  x?: EventHandler;\n  f?: EventHandler;\n  bl?: EventHandler;\n  k?: EventHandler;\n  ku?: EventHandler;\n  kp?: EventHandler;\n  e?: EventHandler;\n  lv?: EventHandler;\n  sub?: EventHandler;\n  // custom styles\n  s?: Record<string, unknown>;\n}\n\ntype ComponentType =\n  | 'V' | 'H' | 'D' | 'G'\n  | 'T' | 'B'\n  | 'I' | 'Ta' | 'S' | 'C' | 'R'\n  | 'Tb' | 'Th' | 'Tbd' | 'Tr' | 'Td' | 'Tc'\n  | 'Ul' | 'Ol' | 'Li'\n  | 'M' | 'L' | 'Sv';\n\ntype StateRef = { $: string };\n\ninterface IfNode {\n  if: StateRef | string;\n  then: NodeSpec | NodeSpec[];\n  else?: NodeSpec | NodeSpec[];\n}\n\ninterface MapNode {\n  map: StateRef | string;\n  as: NodeSpec;\n  key?: string;\n}\n\ntype Content = string | number | StateRef | NodeSpec[] | IfNode | MapNode;\ntype NodeSpec = [ComponentType, Content?, Props?] | IfNode | MapNode;\n\ninterface TooeySpec {\n  s?: Record<string, StateValue>;\n  r: NodeSpec;\n}\n\n// ============ render context for cleanup ============\n\ninterface RenderContext {\n  cleanups: Array<() => void>;\n  state: StateStore;\n}\n\n// ============ signals ============\n\nlet currentEffect: (() => void) | null = null;\nlet batchDepth = 0;\nlet pendingEffects = new Set<() => void>();\n\nfunction signal<T>(initial: T): Signal<T> {\n  let value = initial;\n  const subscribers = new Set<() => void>();\n\n  const sig = (() => {\n    if (currentEffect) {\n      subscribers.add(currentEffect);\n    }\n    return value;\n  }) as Signal<T>;\n\n  sig.set = (v: T | ((prev: T) => T)) => {\n    const newValue = typeof v === 'function' ? (v as (prev: T) => T)(value) : v;\n    if (newValue !== value) {\n      value = newValue;\n      if (batchDepth > 0) {\n        subscribers.forEach(fn => pendingEffects.add(fn));\n      } else {\n        subscribers.forEach(fn => fn());\n      }\n    }\n  };\n\n  sig.sub = (fn: () => void) => {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  };\n\n  return sig;\n}\n\nfunction batch(fn: () => void): void {\n  batchDepth++;\n  try {\n    fn();\n  } finally {\n    batchDepth--;\n    if (batchDepth === 0) {\n      const effects = pendingEffects;\n      pendingEffects = new Set();\n      effects.forEach(fn => fn());\n    }\n  }\n}\n\nfunction effect(fn: () => void, ctx?: RenderContext): () => void {\n  let isActive = true;\n\n  const execute = () => {\n    if (!isActive) return;\n    currentEffect = execute;\n    try {\n      fn();\n    } finally {\n      currentEffect = null;\n    }\n  };\n\n  execute();\n\n  const cleanup = () => {\n    isActive = false;\n    currentEffect = null;\n  };\n\n  if (ctx) {\n    ctx.cleanups.push(cleanup);\n  }\n\n  return cleanup;\n}\n\n// ============ state operations ============\n\nfunction applyOp(state: Signal<StateValue>, op: Op, val?: unknown): void {\n  try {\n    switch (op) {\n      case '+':\n        state.set((v) => (v as number) + (typeof val === 'number' ? val : 1));\n        break;\n      case '-':\n        state.set((v) => (v as number) - (typeof val === 'number' ? val : 1));\n        break;\n      case '!':\n        state.set(val);\n        break;\n      case '~':\n        state.set((v) => !v);\n        break;\n      case '<':\n        state.set((v) => [...(v as unknown[]), val]);\n        break;\n      case '>':\n        state.set((v) => [val, ...(v as unknown[])]);\n        break;\n      case 'X':\n        state.set((v) => {\n          const arr = v as unknown[];\n          if (typeof val === 'number') {\n            return arr.filter((_, i) => i !== val);\n          } else if (typeof val === 'function') {\n            return arr.filter((item, i) => !(val as (item: unknown, i: number) => boolean)(item, i));\n          }\n          return arr.filter(item => item !== val);\n        });\n        break;\n      case '.':\n        if (Array.isArray(val) && val.length === 2) {\n          state.set((v) => ({ ...(v as Record<string, unknown>), [val[0]]: val[1] }));\n        }\n        break;\n    }\n  } catch (err) {\n    console.warn('[tooey] state operation error:', op, err);\n  }\n}\n\n// ============ helpers ============\n\nfunction isStateRef(v: unknown): v is StateRef {\n  return typeof v === 'object' && v !== null && !Array.isArray(v) && '$' in v;\n}\n\nfunction isIfNode(v: unknown): v is IfNode {\n  return typeof v === 'object' && v !== null && !Array.isArray(v) && 'if' in v;\n}\n\nfunction isMapNode(v: unknown): v is MapNode {\n  return typeof v === 'object' && v !== null && !Array.isArray(v) && 'map' in v;\n}\n\nfunction resolveValue(content: unknown, state: StateStore): unknown {\n  if (isStateRef(content)) {\n    const sig = state[content.$];\n    if (!sig) {\n      console.warn(`[tooey] unknown state key: \"${content.$}\"`);\n      return undefined;\n    }\n    return sig();\n  }\n  return content;\n}\n\nfunction resolveCssValue(val: number | string | undefined): string | undefined {\n  if (val === undefined) return undefined;\n  if (typeof val === 'number') return `${val}px`;\n  return val;\n}\n\n// XSS protection - escape HTML entities\nfunction escapeHtml(str: string): string {\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\nfunction createHandler(\n  handler: EventHandler,\n  state: StateStore,\n  event?: Event,\n  itemContext?: { item: unknown, index: number }\n): () => void {\n  if (typeof handler === 'function') {\n    return handler;\n  }\n  const [stateKey, op, val] = handler;\n  return () => {\n    const sig = state[stateKey];\n    if (!sig) {\n      console.warn(`[tooey] click handler: unknown state key \"${stateKey}\"`);\n      return;\n    }\n    let actualVal = val;\n    // Resolve $item and $index in event handler values\n    if (itemContext && typeof actualVal === 'string') {\n      if (actualVal === '$index') {\n        actualVal = itemContext.index;\n      } else if (actualVal === '$item') {\n        actualVal = itemContext.item;\n      } else if (actualVal.startsWith('$item.')) {\n        const key = actualVal.substring(6);\n        actualVal = (itemContext.item as Record<string, unknown>)?.[key];\n      }\n    }\n    if (op === '!' && val === undefined && event) {\n      const target = event.target as HTMLInputElement;\n      actualVal = target.type === 'checkbox' ? target.checked : target.value;\n    }\n    applyOp(sig, op, actualVal);\n  };\n}\n\n// ============ styles ============\n\nfunction applyStyles(el: HTMLElement, props: Props): void {\n  const style = el.style;\n\n  if (props.g !== undefined) style.gap = resolveCssValue(props.g)!;\n  if (props.p !== undefined) style.padding = resolveCssValue(props.p)!;\n  if (props.m !== undefined) style.margin = resolveCssValue(props.m)!;\n  if (props.w !== undefined) style.width = resolveCssValue(props.w)!;\n  if (props.h !== undefined) style.height = resolveCssValue(props.h)!;\n  if (props.mw !== undefined) style.maxWidth = resolveCssValue(props.mw)!;\n  if (props.mh !== undefined) style.maxHeight = resolveCssValue(props.mh)!;\n\n  if (props.bg !== undefined) style.background = props.bg;\n  if (props.fg !== undefined) style.color = props.fg;\n  if (props.o !== undefined) style.opacity = String(props.o);\n\n  if (props.r !== undefined) style.borderRadius = resolveCssValue(props.r)!;\n  if (props.bw !== undefined) style.borderWidth = resolveCssValue(props.bw)!;\n  if (props.bc !== undefined) style.borderColor = props.bc;\n  if (props.bs !== undefined) style.borderStyle = props.bs;\n\n  if (props.pos !== undefined) {\n    const posMap: Record<string, string> = {\n      rel: 'relative', abs: 'absolute', fix: 'fixed', sticky: 'sticky'\n    };\n    style.position = posMap[props.pos] || props.pos;\n  }\n  if (props.z !== undefined) style.zIndex = String(props.z);\n  if (props.t !== undefined) style.top = resolveCssValue(props.t)!;\n  if (props.l !== undefined) style.left = resolveCssValue(props.l)!;\n  if (typeof props.b === 'number' || (typeof props.b === 'string' && !Array.isArray(props.b))) {\n    style.bottom = resolveCssValue(props.b as number | string)!;\n  }\n  if (props.rt !== undefined) style.right = resolveCssValue(props.rt)!;\n\n  if (props.fs !== undefined) style.fontSize = resolveCssValue(props.fs)!;\n  if (props.fw !== undefined) style.fontWeight = String(props.fw);\n  if (props.ff !== undefined) style.fontFamily = props.ff;\n  if (props.ta !== undefined) style.textAlign = props.ta;\n  if (props.td !== undefined) style.textDecoration = props.td;\n  if (props.lh !== undefined) style.lineHeight = typeof props.lh === 'number' ? String(props.lh) : props.lh;\n  if (props.ls !== undefined) style.letterSpacing = resolveCssValue(props.ls)!;\n\n  if (props.ai !== undefined) style.alignItems = props.ai;\n  if (props.jc !== undefined) style.justifyContent = props.jc;\n  if (props.flw !== undefined) style.flexWrap = props.flw;\n\n  if (props.cur !== undefined) style.cursor = props.cur;\n  if (props.ov !== undefined) style.overflow = props.ov;\n  if (props.pe !== undefined) style.pointerEvents = props.pe;\n  if (props.us !== undefined) style.userSelect = props.us;\n  if (props.sh !== undefined) style.boxShadow = props.sh;\n  if (props.tr !== undefined) style.transform = props.tr;\n\n  if (props.s) {\n    Object.entries(props.s).forEach(([key, val]) => {\n      (style as unknown as Record<string, string>)[key] = String(val);\n    });\n  }\n}\n\n// ============ renderer ============\n\nfunction createElement(\n  spec: NodeSpec,\n  ctx: RenderContext,\n  itemContext?: { item: unknown, index: number }\n): HTMLElement | null {\n  const { state } = ctx;\n\n  // handle reactive if node\n  if (isIfNode(spec)) {\n    const placeholder = document.createElement('div');\n    placeholder.style.display = 'contents';\n\n    let currentEl: HTMLElement | null = null;\n    let childCtx: RenderContext | null = null;\n\n    const updateIf = () => {\n      // cleanup previous render\n      if (childCtx) {\n        childCtx.cleanups.forEach(fn => fn());\n        childCtx.cleanups = [];\n      }\n      if (currentEl) {\n        placeholder.innerHTML = '';\n        currentEl = null;\n      }\n\n      const condition = typeof spec.if === 'string'\n        ? state[spec.if]?.()\n        : resolveValue(spec.if, state);\n\n      const branch = condition ? spec.then : spec.else;\n      if (!branch) return;\n\n      childCtx = { cleanups: [], state };\n\n      if (Array.isArray(branch) && branch.length > 0 && Array.isArray(branch[0])) {\n        (branch as NodeSpec[]).forEach(child => {\n          const el = createElement(child, childCtx!, itemContext);\n          if (el) placeholder.appendChild(el);\n        });\n      } else {\n        currentEl = createElement(branch as NodeSpec, childCtx, itemContext);\n        if (currentEl) placeholder.appendChild(currentEl);\n      }\n    };\n\n    effect(updateIf, ctx);\n    return placeholder;\n  }\n\n  // handle reactive map node\n  if (isMapNode(spec)) {\n    const placeholder = document.createElement('div');\n    placeholder.style.display = 'contents';\n\n    let childCtx: RenderContext | null = null;\n\n    const updateMap = () => {\n      // cleanup previous render\n      if (childCtx) {\n        childCtx.cleanups.forEach(fn => fn());\n        childCtx.cleanups = [];\n      }\n      placeholder.innerHTML = '';\n\n      const arr = (typeof spec.map === 'string'\n        ? state[spec.map]?.()\n        : resolveValue(spec.map, state)) as unknown[];\n\n      if (!Array.isArray(arr)) return;\n\n      childCtx = { cleanups: [], state };\n\n      arr.forEach((item, index) => {\n        const el = createElement(spec.as, childCtx!, { item, index });\n        if (el) placeholder.appendChild(el);\n      });\n    };\n\n    effect(updateMap, ctx);\n    return placeholder;\n  }\n\n  // validate spec structure\n  if (!Array.isArray(spec) || spec.length === 0) {\n    console.warn('[tooey] invalid node spec:', spec);\n    return null;\n  }\n\n  const [type, content, props = {}] = spec as [ComponentType, Content?, Props?];\n  let el: HTMLElement;\n\n  switch (type) {\n    case 'V':\n      el = document.createElement('div');\n      el.style.display = 'flex';\n      el.style.flexDirection = 'column';\n      break;\n    case 'H':\n      el = document.createElement('div');\n      el.style.display = 'flex';\n      el.style.flexDirection = 'row';\n      break;\n    case 'G':\n      el = document.createElement('div');\n      el.style.display = 'grid';\n      if (props.cols) {\n        el.style.gridTemplateColumns = typeof props.cols === 'number'\n          ? `repeat(${props.cols}, 1fr)` : props.cols;\n      }\n      if (props.rows) {\n        el.style.gridTemplateRows = typeof props.rows === 'number'\n          ? `repeat(${props.rows}, 1fr)` : props.rows;\n      }\n      break;\n    case 'D':\n      el = document.createElement('div');\n      break;\n    case 'T':\n      el = document.createElement('span');\n      break;\n    case 'B':\n      el = document.createElement('button');\n      break;\n    case 'I':\n      el = document.createElement('input');\n      (el as HTMLInputElement).type = props.type || 'text';\n      if (props.ph) (el as HTMLInputElement).placeholder = props.ph;\n      if (props.ro) (el as HTMLInputElement).readOnly = true;\n      break;\n    case 'Ta':\n      el = document.createElement('textarea');\n      if (props.ph) (el as HTMLTextAreaElement).placeholder = props.ph;\n      if (props.rw) (el as HTMLTextAreaElement).rows = props.rw;\n      if (props.ro) (el as HTMLTextAreaElement).readOnly = true;\n      break;\n    case 'S':\n      el = document.createElement('select');\n      if (props.opts) {\n        props.opts.forEach(opt => {\n          const option = document.createElement('option');\n          option.value = opt.v;\n          option.textContent = opt.l;\n          el.appendChild(option);\n        });\n      }\n      break;\n    case 'C':\n      el = document.createElement('input');\n      (el as HTMLInputElement).type = 'checkbox';\n      break;\n    case 'R':\n      el = document.createElement('input');\n      (el as HTMLInputElement).type = 'radio';\n      break;\n    case 'Tb':\n      el = document.createElement('table');\n      break;\n    case 'Th':\n      el = document.createElement('thead');\n      break;\n    case 'Tbd':\n      el = document.createElement('tbody');\n      break;\n    case 'Tr':\n      el = document.createElement('tr');\n      break;\n    case 'Td':\n      el = document.createElement('td');\n      if (props.sp) (el as HTMLTableCellElement).colSpan = props.sp;\n      if (props.rsp) (el as HTMLTableCellElement).rowSpan = props.rsp;\n      break;\n    case 'Tc':\n      el = document.createElement('th');\n      if (props.sp) (el as HTMLTableCellElement).colSpan = props.sp;\n      if (props.rsp) (el as HTMLTableCellElement).rowSpan = props.rsp;\n      break;\n    case 'Ul':\n      el = document.createElement('ul');\n      break;\n    case 'Ol':\n      el = document.createElement('ol');\n      break;\n    case 'Li':\n      el = document.createElement('li');\n      break;\n    case 'M':\n      el = document.createElement('img');\n      if (props.src) (el as HTMLImageElement).src = props.src;\n      if (props.alt) (el as HTMLImageElement).alt = props.alt;\n      break;\n    case 'L':\n      el = document.createElement('a');\n      if (props.href) (el as HTMLAnchorElement).href = props.href;\n      break;\n    case 'Sv':\n      el = document.createElementNS('http://www.w3.org/2000/svg', 'svg') as unknown as HTMLElement;\n      break;\n    default:\n      console.warn(`[tooey] unknown component type: ${type}`);\n      el = document.createElement('div');\n  }\n\n  if (props.cls) el.className = props.cls;\n  if (props.id) el.id = props.id;\n  if (props.dis) (el as HTMLButtonElement).disabled = true;\n\n  applyStyles(el, props);\n\n  // handle content\n  if (content !== undefined) {\n    if (Array.isArray(content) && content.length > 0 && (Array.isArray(content[0]) || isIfNode(content[0]) || isMapNode(content[0]))) {\n      (content as NodeSpec[]).forEach(childSpec => {\n        const child = createElement(childSpec, ctx, itemContext);\n        if (child) el.appendChild(child);\n      });\n    } else if (isIfNode(content) || isMapNode(content)) {\n      const child = createElement(content as NodeSpec, ctx, itemContext);\n      if (child) el.appendChild(child);\n    } else if (isStateRef(content)) {\n      effect(() => {\n        const val = resolveValue(content, state);\n        const safeVal = escapeHtml(String(val ?? ''));\n        if (type === 'I') {\n          (el as HTMLInputElement).value = String(val ?? '');\n        } else if (type === 'Ta') {\n          (el as HTMLTextAreaElement).value = String(val ?? '');\n        } else if (type === 'C' || type === 'R') {\n          (el as HTMLInputElement).checked = Boolean(val);\n        } else {\n          el.textContent = String(val ?? '');\n        }\n      }, ctx);\n    } else if (typeof content === 'string' || typeof content === 'number') {\n      let textContent = String(content);\n      if (itemContext) {\n        // handle object property access first (before $item replacement)\n        if (typeof itemContext.item === 'object' && itemContext.item !== null) {\n          textContent = textContent.replace(/\\$item\\.(\\w+)/g, (_, key) => {\n            return String((itemContext.item as Record<string, unknown>)[key] ?? '');\n          });\n        }\n        textContent = textContent.replace(/\\$item/g, String(itemContext.item));\n        textContent = textContent.replace(/\\$index/g, String(itemContext.index));\n      }\n      // XSS protection for static content\n      if (type === 'I') {\n        (el as HTMLInputElement).value = textContent;\n      } else if (type === 'Ta') {\n        (el as HTMLTextAreaElement).value = textContent;\n      } else if (type !== 'S') {\n        // don't set textContent for select (would clear options)\n        el.textContent = textContent;\n      }\n    }\n  }\n\n  // handle value binding for inputs\n  if (props.v !== undefined && isStateRef(props.v)) {\n    effect(() => {\n      const val = resolveValue(props.v!, state);\n      if (type === 'I' || type === 'S' || type === 'Ta') {\n        (el as HTMLInputElement).value = String(val ?? '');\n      } else if (type === 'C' || type === 'R') {\n        (el as HTMLInputElement).checked = Boolean(val);\n      }\n    }, ctx);\n  }\n\n  // handle checked binding\n  if (props.ch !== undefined) {\n    if (isStateRef(props.ch as unknown)) {\n      effect(() => {\n        const val = resolveValue(props.ch as unknown as StateRef, state);\n        (el as HTMLInputElement).checked = Boolean(val);\n      }, ctx);\n    } else {\n      (el as HTMLInputElement).checked = Boolean(props.ch);\n    }\n  }\n\n  // event handlers with cleanup tracking\n  const addEventListener = (event: string, handler: (e: Event) => void) => {\n    el.addEventListener(event, handler);\n    ctx.cleanups.push(() => el.removeEventListener(event, handler));\n  };\n\n  if (props.c) {\n    addEventListener('click', (e) => createHandler(props.c!, state, e, itemContext)());\n  }\n  if (props.x) {\n    const handler = props.x;\n    addEventListener('input', (e) => {\n      if (typeof handler === 'function') {\n        handler();\n      } else {\n        const [stateKey, op] = handler;\n        const sig = state[stateKey];\n        if (sig) {\n          const target = e.target as HTMLInputElement;\n          const val = (type === 'C' || type === 'R') ? target.checked : target.value;\n          applyOp(sig, op, val);\n        }\n      }\n    });\n  }\n  if (props.f) {\n    addEventListener('focus', (e) => createHandler(props.f!, state, e, itemContext)());\n  }\n  if (props.bl) {\n    addEventListener('blur', (e) => createHandler(props.bl!, state, e, itemContext)());\n  }\n  if (props.k) {\n    addEventListener('keydown', (e) => createHandler(props.k!, state, e, itemContext)());\n  }\n  if (props.ku) {\n    addEventListener('keyup', (e) => createHandler(props.ku!, state, e, itemContext)());\n  }\n  if (props.kp) {\n    addEventListener('keypress', (e) => createHandler(props.kp!, state, e, itemContext)());\n  }\n  if (props.e) {\n    addEventListener('mouseenter', (e) => createHandler(props.e!, state, e, itemContext)());\n  }\n  if (props.lv) {\n    addEventListener('mouseleave', (e) => createHandler(props.lv!, state, e, itemContext)());\n  }\n  if (props.sub) {\n    addEventListener('submit', (e) => {\n      e.preventDefault();\n      createHandler(props.sub!, state, e, itemContext)();\n    });\n  }\n\n  return el;\n}\n\n// ============ main api ============\n\ninterface TooeyInstance {\n  state: StateStore;\n  el: HTMLElement | null;\n  destroy(): void;\n  update(newSpec: TooeySpec): void;\n  get(key: string): unknown;\n  set(key: string, value: unknown): void;\n}\n\nfunction render(container: HTMLElement, spec: TooeySpec): TooeyInstance {\n  if (!container) {\n    throw new Error('[tooey] render requires a valid container element');\n  }\n  if (!spec || !spec.r) {\n    throw new Error('[tooey] render requires a spec with a root node (r)');\n  }\n\n  const state: StateStore = {};\n  if (spec.s) {\n    Object.entries(spec.s).forEach(([key, val]) => {\n      state[key] = signal(val);\n    });\n  }\n\n  const ctx: RenderContext = { cleanups: [], state };\n\n  container.innerHTML = '';\n  const el = createElement(spec.r, ctx);\n  if (el) container.appendChild(el);\n\n  const instance: TooeyInstance = {\n    state,\n    el,\n    destroy() {\n      ctx.cleanups.forEach(fn => fn());\n      ctx.cleanups = [];\n      container.innerHTML = '';\n    },\n    update(newSpec: TooeySpec) {\n      if (newSpec.s) {\n        batch(() => {\n          Object.entries(newSpec.s!).forEach(([key, val]) => {\n            if (state[key]) {\n              state[key].set(val);\n            } else {\n              state[key] = signal(val);\n            }\n          });\n        });\n      }\n      if (newSpec.r) {\n        ctx.cleanups.forEach(fn => fn());\n        ctx.cleanups = [];\n        container.innerHTML = '';\n        const newEl = createElement(newSpec.r, ctx);\n        if (newEl) container.appendChild(newEl);\n        instance.el = newEl;\n      }\n    },\n    get(key: string) {\n      return state[key]?.();\n    },\n    set(key: string, value: unknown) {\n      if (state[key]) {\n        state[key].set(value);\n      }\n    }\n  };\n\n  return instance;\n}\n\n// ============ convenience helpers ============\n\nfunction $(name: string): StateRef {\n  return { $: name };\n}\n\n// component type constants\nconst V = 'V' as const;\nconst H = 'H' as const;\nconst D = 'D' as const;\nconst G = 'G' as const;\nconst T = 'T' as const;\nconst B = 'B' as const;\nconst I = 'I' as const;\nconst Ta = 'Ta' as const;\nconst S = 'S' as const;\nconst C = 'C' as const;\nconst R = 'R' as const;\nconst Tb = 'Tb' as const;\nconst Th = 'Th' as const;\nconst Tbd = 'Tbd' as const;\nconst Tr = 'Tr' as const;\nconst Td = 'Td' as const;\nconst Tc = 'Tc' as const;\nconst Ul = 'Ul' as const;\nconst Ol = 'Ol' as const;\nconst Li = 'Li' as const;\nconst M = 'M' as const;\nconst L = 'L' as const;\nconst Sv = 'Sv' as const;\n\nexport {\n  render,\n  signal,\n  effect,\n  batch,\n  $,\n  V, H, D, G,\n  T, B,\n  I, Ta, S, C, R,\n  Tb, Th, Tbd, Tr, Td, Tc,\n  Ul, Ol, Li,\n  M, L, Sv,\n  TooeySpec,\n  NodeSpec,\n  Props,\n  StateRef,\n  TooeyInstance,\n  IfNode,\n  MapNode\n};\n"],
  "mappings": "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",
  "names": ["tooey_exports", "__export", "$", "B", "C", "D", "G", "H", "I", "L", "Li", "M", "Ol", "R", "S", "Sv", "T", "Ta", "Tb", "Tbd", "Tc", "Td", "Th", "Tr", "Ul", "V", "batch", "effect", "render", "signal", "currentEffect", "batchDepth", "pendingEffects", "initial", "value", "subscribers", "sig", "v", "newValue", "fn", "effects", "ctx", "isActive", "execute", "cleanup", "applyOp", "state", "op", "val", "arr", "_", "i", "item", "err", "isStateRef", "isIfNode", "isMapNode", "resolveValue", "content", "resolveCssValue", "escapeHtml", "str", "div", "createHandler", "handler", "event", "itemContext", "stateKey", "actualVal", "key", "target", "applyStyles", "el", "props", "style", "posMap", "createElement", "spec", "placeholder", "currentEl", "childCtx", "branch", "child", "index", "type", "opt", "option", "childSpec", "safeVal", "textContent", "addEventListener", "e", "container", "instance", "newSpec", "newEl", "name"]
}
